<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>急救系统管理平台</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: #f5f7fa;
        }
        .navbar {
            background-color: #1a5276;
        }
        .navbar-brand {
            font-weight: bold;
            color: white !important;
        }
        .nav-link {
            color: white !important;
        }
        .card {
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .card-header {
            background-color: #2980b9;
            color: white;
            font-weight: bold;
        }
        .btn-primary {
            background-color: #2980b9;
            border-color: #2980b9;
        }
        .btn-primary:hover {
            background-color: #1a5276;
            border-color: #1a5276;
        }
        .btn-danger {
            background-color: #c0392b;
            border-color: #c0392b;
        }
        .btn-danger:hover {
            background-color: #a93226;
            border-color: #a93226;
        }
        .btn-success {
            background-color: #27ae60;
            border-color: #27ae60;
        }
        .btn-success:hover {
            background-color: #219955;
            border-color: #219955;
        }
        .table th {
            background-color: #f2f2f2;
        }
        .pagination {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar navbar-expand-lg navbar-dark mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-ambulance me-2"></i>急救系统管理平台
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="切换导航">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="showSection('tasks')">任务管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('ambulances')">救护车管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('medicalStaff')">医护人员管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('medicalEquipment')">医疗设备管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="showSection('taskRecords')">任务记录管理</a>
                    </li>
                    <li class="nav-item ms-3">
                        <a class="btn btn-outline-light" href="#" id="logoutBtn">退出登录</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <!-- 任务管理部分 -->
        <div id="tasksSection" class="section-content">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>任务管理</span>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#taskAddModal">
                        <i class="fas fa-plus me-1"></i>添加任务
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="taskSearch" placeholder="搜索任务...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>状态</th>
                                    <th>位置</th>
                                    <th>描述</th>
                                    <th>时间</th>
                                    <th>响应时间</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="tasksTableBody">
                                <!-- 表格内容由JS动态生成 -->
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">上一页</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">下一页</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        <!-- 救护车管理部分 -->
        <div id="ambulancesSection" class="section-content d-none">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>救护车管理</span>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ambulanceAddModal">
                        <i class="fas fa-plus me-1"></i>添加救护车
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="ambulanceSearch" placeholder="搜索救护车...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>救护车ID</th>
                                    <th>车牌号</th>
                                    <th>状态</th>
                                    <th>司机姓名</th>
                                    <th>司机电话</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="ambulancesTableBody">
                                <!-- 表格内容由JS动态生成 -->
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">上一页</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">下一页</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        <!-- 医护人员管理部分 -->
        <div id="medicalStaffSection" class="section-content d-none">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>医护人员管理</span>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#medicalStaffAddModal">
                        <i class="fas fa-plus me-1"></i>添加医护人员
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="medicalStaffSearch" placeholder="搜索医护人员...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>员工ID</th>
                                    <th>姓名</th>
                                    <th>角色</th>
                                    <th>状态</th>
                                    <th>联系电话</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="medicalStaffTableBody">
                                <!-- 表格内容由JS动态生成 -->
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">上一页</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">下一页</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        <!-- 医疗设备管理部分 -->
        <div id="medicalEquipmentSection" class="section-content d-none">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>医疗设备管理</span>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#medicalEquipmentAddModal">
                        <i class="fas fa-plus me-1"></i>添加设备
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="medicalEquipmentSearch" placeholder="搜索设备...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>设备ID</th>
                                    <th>设备名称</th>
                                    <th>状态</th>
                                    <th>关联救护车</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="medicalEquipmentTableBody">
                                <!-- 表格内容由JS动态生成 -->
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">上一页</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">下一页</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>

        <!-- 任务记录管理部分 -->
        <div id="taskRecordsSection" class="section-content d-none">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span>任务记录管理</span>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#taskRecordAddModal">
                        <i class="fas fa-plus me-1"></i>添加记录
                    </button>
                </div>
                <div class="card-body">
                    <div class="mb-3">
                        <input type="text" class="form-control" id="taskRecordSearch" placeholder="搜索记录...">
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>记录ID</th>
                                    <th>任务ID</th>
                                    <th>救护车ID</th>
                                    <th>设备ID</th>
                                    <th>医生ID</th>
                                    <th>开始时间</th>
                                    <th>结束时间</th>
                                    <th>持续时间</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="taskRecordsTableBody">
                                <!-- 表格内容由JS动态生成 -->
                            </tbody>
                        </table>
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-center">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1">上一页</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">下一页</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加任务模态框 -->
    <div class="modal fade" id="taskAddModal" tabindex="-1" aria-labelledby="taskAddModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taskAddModalLabel">添加任务</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="taskAddForm">
                        <div class="mb-3">
                            <label for="taskId" class="form-label">任务ID</label>
                            <input type="text" class="form-control" id="taskId" required>
                        </div>
                        <div class="mb-3">
                            <label for="taskStatus" class="form-label">状态</label>
                            <select class="form-select" id="taskStatus" required>
                                <option value="completed">已完成</option>
                                <option value="processing">进行中</option>
                                <option value="pending">待处理</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="taskLocation" class="form-label">位置</label>
                            <input type="text" class="form-control" id="taskLocation" required>
                        </div>
                        <div class="mb-3">
                            <label for="taskDescription" class="form-label">描述</label>
                            <textarea class="form-control" id="taskDescription" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="taskTime" class="form-label">时间</label>
                            <input type="datetime-local" class="form-control" id="taskTime" required>
                        </div>
                        <div class="mb-3">
                            <label for="taskResponseTime" class="form-label">响应时间（分钟）</label>
                            <input type="number" class="form-control" id="taskResponseTime" min="0">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="addTaskBtn">添加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加救护车模态框 -->
    <div class="modal fade" id="ambulanceAddModal" tabindex="-1" aria-labelledby="ambulanceAddModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ambulanceAddModalLabel">添加救护车</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="ambulanceAddForm">
                        <div class="mb-3">
                            <label for="ambulanceId" class="form-label">救护车ID</label>
                            <input type="text" class="form-control" id="ambulanceId" required>
                        </div>
                        <div class="mb-3">
                            <label for="ambulanceLicensePlate" class="form-label">车牌号</label>
                            <input type="text" class="form-control" id="ambulanceLicensePlate" required>
                        </div>
                        <div class="mb-3">
                            <label for="ambulanceStatus" class="form-label">状态</label>
                            <select class="form-select" id="ambulanceStatus" required>
                                <option value="online">在线</option>
                                <option value="processing">任务中</option>
                                <option value="offline">离线</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="ambulanceDriverName" class="form-label">司机姓名</label>
                            <input type="text" class="form-control" id="ambulanceDriverName" required>
                        </div>
                        <div class="mb-3">
                            <label for="ambulanceDriverPhone" class="form-label">司机电话</label>
                            <input type="tel" class="form-control" id="ambulanceDriverPhone" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="addAmbulanceBtn">添加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加医护人员模态框 -->
    <div class="modal fade" id="medicalStaffAddModal" tabindex="-1" aria-labelledby="medicalStaffAddModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="medicalStaffAddModalLabel">添加医护人员</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="medicalStaffAddForm">
                        <div class="mb-3">
                            <label for="staffId" class="form-label">员工ID</label>
                            <input type="text" class="form-control" id="staffId" required>
                        </div>
                        <div class="mb-3">
                            <label for="staffName" class="form-label">姓名</label>
                            <input type="text" class="form-control" id="staffName" required>
                        </div>
                        <div class="mb-3">
                            <label for="staffRole" class="form-label">角色</label>
                            <input type="text" class="form-control" id="staffRole" required>
                        </div>
                        <div class="mb-3">
                            <label for="staffStatus" class="form-label">状态</label>
                            <select class="form-select" id="staffStatus" required>
                                <option value="on_duty">当班</option>
                                <option value="standby">待命</option>
                                <option value="off_duty">未值班</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="staffPhone" class="form-label">联系电话</label>
                            <input type="tel" class="form-control" id="staffPhone" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="addMedicalStaffBtn">添加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加医疗设备模态框 -->
    <div class="modal fade" id="medicalEquipmentAddModal" tabindex="-1" aria-labelledby="medicalEquipmentAddModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="medicalEquipmentAddModalLabel">添加设备</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="medicalEquipmentAddForm">
                        <div class="mb-3">
                            <label for="equipmentId" class="form-label">设备ID</label>
                            <input type="text" class="form-control" id="equipmentId" required>
                        </div>
                        <div class="mb-3">
                            <label for="equipmentName" class="form-label">设备名称</label>
                            <input type="text" class="form-control" id="equipmentName" required>
                        </div>
                        <div class="mb-3">
                            <label for="equipmentStatus" class="form-label">状态</label>
                            <select class="form-select" id="equipmentStatus" required>
                                <option value="available">可用</option>
                                <option value="unavailable">不可用</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="equipmentAmbulanceId" class="form-label">关联救护车ID</label>
                            <input type="text" class="form-control" id="equipmentAmbulanceId" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="addMedicalEquipmentBtn">添加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 添加任务记录模态框 -->
    <div class="modal fade" id="taskRecordAddModal" tabindex="-1" aria-labelledby="taskRecordAddModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="taskRecordAddModalLabel">添加任务记录</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="taskRecordAddForm">
                        <div class="mb-3">
                            <label for="recordTaskId" class="form-label">任务ID</label>
                            <input type="text" class="form-control" id="recordTaskId" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordAmbulanceId" class="form-label">救护车ID</label>
                            <input type="text" class="form-control" id="recordAmbulanceId" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordEquipmentId" class="form-label">设备ID</label>
                            <input type="text" class="form-control" id="recordEquipmentId" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordDoctorId" class="form-label">医生ID</label>
                            <input type="text" class="form-control" id="recordDoctorId" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordStartTime" class="form-label">开始时间</label>
                            <input type="datetime-local" class="form-control" id="recordStartTime" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordEndTime" class="form-label">结束时间</label>
                            <input type="datetime-local" class="form-control" id="recordEndTime" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordDuration" class="form-label">持续时间（分钟）</label>
                            <input type="number" class="form-control" id="recordDuration" required>
                        </div>
                        <div class="mb-3">
                            <label for="recordStatus" class="form-label">状态</label>
                            <select class="form-select" id="recordStatus" required>
                                <option value="completed">已完成</option>
                                <option value="canceled">已取消</option>
                                <option value="ongoing">进行中</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="addTaskRecordBtn">添加</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 编辑模态框 -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">编辑信息</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm">
                        <!-- 编辑表单内容由JS动态生成 -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="saveEditBtn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        // 当前显示的管理部分
        let currentSection = 'tasks';

        // 显示指定的管理部分
        function showSection(section) {
            // 隐藏所有部分
            document.querySelectorAll('.section-content').forEach(sectionElement => {
                sectionElement.classList.add('d-none');
            });

            // 显示指定部分
            document.getElementById(section + 'Section').classList.remove('d-none');

            // 更新当前部分
            currentSection = section;
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 默认显示任务管理部分
            showSection('tasks');

            // 搜索功能
            document.getElementById('taskSearch').addEventListener('input', function() {
                searchTable('tasksTableBody', this.value);
            });
            document.getElementById('ambulanceSearch').addEventListener('input', function() {
                searchTable('ambulancesTableBody', this.value);
            });
            document.getElementById('medicalStaffSearch').addEventListener('input', function() {
                searchTable('medicalStaffTableBody', this.value);
            });
            document.getElementById('medicalEquipmentSearch').addEventListener('input', function() {
                searchTable('medicalEquipmentTableBody', this.value);
            });
            document.getElementById('taskRecordSearch').addEventListener('input', function() {
                searchTable('taskRecordsTableBody', this.value);
            });

            // 添加按钮事件监听
            document.getElementById('addTaskBtn').addEventListener('click', addTask);
            document.getElementById('addAmbulanceBtn').addEventListener('click', addAmbulance);
            document.getElementById('addMedicalStaffBtn').addEventListener('click', addMedicalStaff);
            document.getElementById('addMedicalEquipmentBtn').addEventListener('click', addMedicalEquipment);
            document.getElementById('addTaskRecordBtn').addEventListener('click', addTaskRecord);
            document.getElementById('saveEditBtn').addEventListener('click', saveEdit);

            // 初始化数据
            loadTasks();
            loadAmbulances();
            loadMedicalStaff();
            loadMedicalEquipment();
            loadTaskRecords();

            // 退出登录按钮事件
            document.getElementById('logoutBtn').addEventListener('click', function() {
                if (confirm('确定要退出登录吗？')) {
                    // 这里可以添加退出登录的逻辑，例如清除登录状态、跳转到登录页等
                    alert('退出登录成功！');
                }
            });
        });

        // 搜索框功能
        function searchTable(tableId, searchText) {
            const tableRows = document.querySelectorAll(`#${tableId} tr`);
            tableRows.forEach(row => {
                const rowData = row.textContent.toLowerCase();
                if (rowData.includes(searchText.toLowerCase())) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // 添加任务
        function addTask() {
            const taskId = document.getElementById('taskId').value;
            const status = document.getElementById('taskStatus').value;
            const location = document.getElementById('taskLocation').value;
            const description = document.getElementById('taskDescription').value;
            const time = document.getElementById('taskTime').value;
            const responseTime = document.getElementById('taskResponseTime').value;

            // 这里应该发送请求到后端API添加任务
            console.log('添加任务:', { taskId, status, location, description, time, responseTime });

            // 模拟添加成功
            alert('任务添加成功！');
            document.getElementById('taskAddForm').reset();
            $('#taskAddModal').modal('hide');
            loadTasks();
        }

        // 添加救护车
        function addAmbulance() {
            const ambulanceId = document.getElementById('ambulanceId').value;
            const licensePlate = document.getElementById('ambulanceLicensePlate').value;
            const status = document.getElementById('ambulanceStatus').value;
            const driverName = document.getElementById('ambulanceDriverName').value;
            const driverPhone = document.getElementById('ambulanceDriverPhone').value;

            // 这里应该发送请求到后端API添加救护车
            console.log('添加救护车:', { ambulanceId, licensePlate, status, driverName, driverPhone });

            // 模拟添加成功
            alert('救护车添加成功！');
            document.getElementById('ambulanceAddForm').reset();
            $('#ambulanceAddModal').modal('hide');
            loadAmbulances();
        }

        // 添加医护人员
        function addMedicalStaff() {
            const staffId = document.getElementById('staffId').value;
            const name = document.getElementById('staffName').value;
            const role = document.getElementById('staffRole').value;
            const status = document.getElementById('staffStatus').value;
            const phone = document.getElementById('staffPhone').value;

            // 这里应该发送请求到后端API添加医护人员
            console.log('添加医护人员:', { staffId, name, role, status, phone });

            // 模拟添加成功
            alert('医护人员添加成功！');
            document.getElementById('medicalStaffAddForm').reset();
            $('#medicalStaffAddModal').modal('hide');
            loadMedicalStaff();
        }

        // 添加医疗设备
        function addMedicalEquipment() {
            const equipmentId = document.getElementById('equipmentId').value;
            const name = document.getElementById('equipmentName').value;
            const status = document.getElementById('equipmentStatus').value;
            const ambulanceId = document.getElementById('equipmentAmbulanceId').value;

            // 这里应该发送请求到后端API添加医疗设备
            console.log('添加医疗设备:', { equipmentId, name, status, ambulanceId });

            // 模拟添加成功
            alert('医疗设备添加成功！');
            document.getElementById('medicalEquipmentAddForm').reset();
            $('#medicalEquipmentAddModal').modal('hide');
            loadMedicalEquipment();
        }

        // 添加任务记录
        function addTaskRecord() {
            const taskId = document.getElementById('recordTaskId').value;
            const ambulanceId = document.getElementById('recordAmbulanceId').value;
            const equipmentId = document.getElementById('recordEquipmentId').value;
            const doctorId = document.getElementById('recordDoctorId').value;
            const startTime = document.getElementById('recordStartTime').value;
            const endTime = document.getElementById('recordEndTime').value;
            const duration = document.getElementById('recordDuration').value;
            const status = document.getElementById('recordStatus').value;

            // 这里应该发送请求到后端API添加任务记录
            console.log('添加任务记录:', { taskId, ambulanceId, equipmentId, doctorId, startTime, endTime, duration, status });

            // 模拟添加成功
            alert('任务记录添加成功！');
            document.getElementById('taskRecordAddForm').reset();
            $('#taskRecordAddModal').modal('hide');
            loadTaskRecords();
        }

        // 编辑功能
        function editItem(section, id) {
            // 根据section和id获取对应的数据
            let item = {};
            if (section === 'tasks') {
                item = getTaskById(id);
            } else if (section === 'ambulances') {
                item = getAmbulanceById(id);
            } else if (section === 'medicalStaff') {
                item = getMedicalStaffById(id);
            } else if (section === 'medicalEquipment') {
                item = getMedicalEquipmentById(id);
            } else if (section === 'taskRecords') {
                item = getTaskRecordById(id);
            }

            // 填充编辑表单
            const editForm = document.getElementById('editForm');
            editForm.innerHTML = '';
            for (const key in item) {
                if (key !== 'id') {
                    const formGroup = document.createElement('div');
                    formGroup.className = 'mb-3';
                    const label = document.createElement('label');
                    label.className = 'form-label';
                    label.textContent = key.charAt(0).toUpperCase() + key.slice(1);
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.className = 'form-control';
                    input.value = item[key];
                    input.name = key;
                    formGroup.appendChild(label);
                    formGroup.appendChild(input);
                    editForm.appendChild(formGroup);
                }
            }

            // 设置隐藏的ID字段
            const hiddenId = document.createElement('input');
            hiddenId.type = 'hidden';
            hiddenId.name = 'id';
            hiddenId.value = id;
            editForm.appendChild(hiddenId);

            // 设置模态框标题
            document.getElementById('editModalLabel').textContent = section.charAt(0).toUpperCase() + section.slice(1) + '信息';

            // 显示模态框
            $('#editModal').modal('show');
        }

        // 保存编辑
        function saveEdit() {
            const formData = new FormData(document.getElementById('editForm'));
            const id = formData.get('id');
            const data = {};
            for (const [key, value] of formData.entries()) {
                if (key !== 'id') {
                    data[key] = value;
                }
            }

            // 这里应该发送请求到后端API更新数据
            console.log('更新数据:', { id, data });

            // 模拟更新成功
            alert('信息更新成功！');
            $('#editModal').modal('hide');
            if (currentSection === 'tasks') {
                loadTasks();
            } else if (currentSection === 'ambulances') {
                loadAmbulances();
            } else if (currentSection === 'medicalStaff') {
                loadMedicalStaff();
            } else if (currentSection === 'medicalEquipment') {
                loadMedicalEquipment();
            } else if (currentSection === 'taskRecords') {
                loadTaskRecords();
            }
        }

        // 删除功能
        function deleteItem(section, id) {
            if (!confirm('确定要删除这条记录吗？')) {
                return;
            }

            // 这里应该发送请求到后端API删除数据
            console.log('删除数据:', { section, id });

            // 模拟删除成功
            alert('删除成功！');
            if (section === 'tasks') {
                loadTasks();
            } else if (section === 'ambulances') {
                loadAmbulances();
            } else if (section === 'medicalStaff') {
                loadMedicalStaff();
            } else if (section === 'medicalEquipment') {
                loadMedicalEquipment();
            } else if (section === 'taskRecords') {
                loadTaskRecords();
            }
        }

        // 获取任务数据
        function getTaskById(id) {
            // 这里应该发送请求到后端API获取任务详情
            // 这里只是模拟数据
            return {
                id: id,
                status: 'completed',
                location: '上海市浦东新区陆家嘴',
                description: '交通事故，有人员受伤',
                time: '2025-04-18T08:45',
                response_time: 30
            };
        }

        // 获取救护车数据
        function getAmbulanceById(id) {
            // 这里应该发送请求到后端API获取救护车详情
            // 这里只是模拟数据
            return {
                ambulance_id: id,
                license_plate: '沪A12345',
                status: 'online',
                driver_name: '张司机',
                driver_phone: '13800138000'
            };
        }

        // 获取医护人员数据
        function getMedicalStaffById(id) {
            // 这里应该发送请求到后端API获取医护人员详情
            // 这里只是模拟数据
            return {
                staff_id: id,
                name: '张医生',
                role: '医生',
                status: 'on_duty',
                phone: '13800138000'
            };
        }

        // 获取医疗设备数据
        function getMedicalEquipmentById(id) {
            // 这里应该发送请求到后端API获取设备详情
            // 这里只是模拟数据
            return {
                equipment_id: id,
                name: '除颤器',
                status: 'available',
                ambulance_id: 'AMB001'
            };
        }

        // 获取任务记录数据
        function getTaskRecordById(id) {
            // 这里应该发送请求到后端API获取任务记录详情
            // 这里只是模拟数据
            return {
                record_id: id,
                task_id: 'T001',
                ambulance_id: 'AMB001',
                equipment_id: 'EQ001',
                doctor_id: 'MS001',
                start_time: '2025-04-18T08:45',
                end_time: '2025-04-18T09:15',
                duration: 30,
                task_status: 'completed'
            };
        }

        // 加载任务数据
        function loadTasks() {
            // 这里应该发送请求到后端API获取任务列表
            // 这里只是模拟数据
            const tasks = [
                { id: 'T011', status: 'completed', statusText: '已完成', location: '上海市浦东新区陆家嘴', description: '交通事故，有人员受伤', time: '2025-04-18T08:45:00', response_time: 30 },
                { id: 'T012', status: 'completed', statusText: '已完成', location: '上海市徐汇区漕河泾', description: '老人突发脑溢血，需要紧急救护', time: '2025-04-18T09:00:00', response_time: 40 },
                { id: 'T013', status: 'completed', statusText: '已完成', location: '上海市静安区南京西路', description: '儿童误食异物，已成功救治', time: '2025-04-18T07:30:00', response_time: 30 },
                { id: 'T014', status: 'completed', statusText: '已完成', location: '上海市杨浦区五角场', description: '工厂火灾，有人员被困', time: '2025-04-18T10:00:00', response_time: 30 },
                { id: 'T015', status: 'completed', statusText: '已完成', location: '上海市闵行区莘庄', description: '孕妇临产，需要紧急送医', time: '2025-04-18T11:15:00', response_time: 30 },
                { id: 'T016', status: 'completed', statusText: '已完成', location: '上海市虹口区鲁迅公园', description: '老人摔倒，已送往医院', time: '2025-04-18T06:45:00', response_time: 20 },
                { id: 'T021', status: 'completed', statusText: '已完成', location: '上海市浦东新区陆家嘴', description: '交通事故，有人员受伤', time: '2025-04-19T00:45:00', response_time: 30 },
                { id: 'T022', status: 'completed', statusText: '已完成', location: '上海市徐汇区漕河泾', description: '老人突发脑溢血，需要紧急救护', time: '2025-04-19T01:00:00', response_time: 40 },
                { id: 'T023', status: 'processing', statusText: '进行中', location: '上海市静安区南京西路', description: '儿童误食异物，紧急救治中', time: '2025-04-19T01:30:00', response_time: null },
                { id: 'T024', status: 'pending', statusText: '待处理', location: '上海市杨浦区五角场', description: '工厂火灾，有人员被困', time: '2025-04-19T01:45:00', response_time: null }
            ];

            const tableBody = document.getElementById('tasksTableBody');
            tableBody.innerHTML = '';
            tasks.forEach(task => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${task.id}</td>
                    <td>${task.status}</td>
                    <td>${task.location}</td>
                    <td>${task.description}</td>
                    <td>${new Date(task.time).toLocaleString()}</td>
                    <td>${task.response_time || '-'}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editItem('tasks', '${task.id}')">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('tasks', '${task.id}')">
                            <i class="fas fa-trash"></i> 删除
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // 加载救护车数据
        function loadAmbulances() {
            // 这里应该发送请求到后端API获取救护车列表
            // 这里只是模拟数据
            const ambulances = [
                { ambulance_id: 'AMB001', license_plate: '沪A12345', status: 'online', statusText: '在线', driver_name: '张司机', driver_phone: '13800138000' },
                { ambulance_id: 'AMB002', license_plate: '沪B67890', status: 'processing', statusText: '任务中', driver_name: '李司机', driver_phone: '13900139000' },
                { ambulance_id: 'AMB003', license_plate: '沪C54321', status: 'offline', statusText: '离线', driver_name: '王司机', driver_phone: '13700137000' },
                { ambulance_id: 'AMB004', license_plate: '沪D98765', status: 'online', statusText: '在线', driver_name: '赵司机', driver_phone: '13600136000' },
                { ambulance_id: 'AMB005', license_plate: '沪E13579', status: 'processing', statusText: '任务中', driver_name: '孙司机', driver_phone: '13500135000' }
            ];

            const tableBody = document.getElementById('ambulancesTableBody');
            tableBody.innerHTML = '';
            ambulances.forEach(ambulance => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${ambulance.ambulance_id}</td>
                    <td>${ambulance.license_plate}</td>
                    <td>${ambulance.status}</td>
                    <td>${ambulance.driver_name}</td>
                    <td>${ambulance.driver_phone}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editItem('ambulances', '${ambulance.ambulance_id}')">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('ambulances', '${ambulance.ambulance_id}')">
                            <i class="fas fa-trash"></i> 删除
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // 加载医护人员数据
        function loadMedicalStaff() {
            // 这里应该发送请求到后端API获取医护人员列表
            // 这里只是模拟数据
            const medicalStaff = [
                { staff_id: 'MS001', name: '张医生', role: '医生', status: 'on_duty', statusText: '当班', phone: '13800138000' },
                { staff_id: 'MS002', name: '李护士', role: '护士', status: 'standby', statusText: '待命', phone: '13900139000' },
                { staff_id: 'MS003', name: '王医生', role: '医生', status: 'on_duty', statusText: '当班', phone: '13700137000' },
                { staff_id: 'MS004', name: '赵护士', role: '护士', status: 'standby', statusText: '待命', phone: '13600136000' },
                { staff_id: 'MS005', name: '孙医生', role: '医生', status: 'off_duty', statusText: '未值班', phone: '13500135000' }
            ];

            const tableBody = document.getElementById('medicalStaffTableBody');
            tableBody.innerHTML = '';
            medicalStaff.forEach(staff => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${staff.staff_id}</td>
                    <td>${staff.name}</td>
                    <td>${staff.role}</td>
                    <td>${staff.status}</td>
                    <td>${staff.phone}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editItem('medicalStaff', '${staff.staff_id}')">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('medicalStaff', '${staff.staff_id}')">
                            <i class="fas fa-trash"></i> 删除
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // 加载医疗设备数据
        function loadMedicalEquipment() {
            // 这里应该发送请求到后端API获取设备列表
            // 这里只是模拟数据
            const medicalEquipment = [
                { equipment_id: 'EQ001', name: '除颤器', status: 'available', statusText: '可用', ambulance_id: 'AMB001' },
                { equipment_id: 'EQ002', name: '心电监护仪', status: 'available', statusText: '可用', ambulance_id: 'AMB001' },
                { equipment_id: 'EQ003', name: '呼吸机', status: 'unavailable', statusText: '不可用', ambulance_id: 'AMB002' },
                { equipment_id: 'EQ004', name: '输液泵', status: 'available', statusText: '可用', ambulance_id: 'AMB002' },
                { equipment_id: 'EQ005', name: '除颤器', status: 'available', statusText: '可用', ambulance_id: 'AMB003' }
            ];

            const tableBody = document.getElementById('medicalEquipmentTableBody');
            tableBody.innerHTML = '';
            medicalEquipment.forEach(equipment => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${equipment.equipment_id}</td>
                    <td>${equipment.name}</td>
                    <td>${equipment.status}</td>
                    <td>${equipment.ambulance_id}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editItem('medicalEquipment', '${equipment.equipment_id}')">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('medicalEquipment', '${equipment.equipment_id}')">
                            <i class="fas fa-trash"></i> 删除
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // 加载任务记录数据
        function loadTaskRecords() {
            // 这里应该发送请求到后端API获取任务记录列表
            // 这里只是模拟数据
            const taskRecords = [
                { record_id: 1, task_id: 'T011', ambulance_id: 'AMB001', equipment_id: 'EQ001', doctor_id: 'MS001', start_time: '2025-04-18T08:45:00', end_time: '2025-04-18T09:15:00', duration: 30, task_status: 'completed', task_statusText: '任务已完成' },
                { record_id: 2, task_id: 'T012', ambulance_id: 'AMB002', equipment_id: 'EQ004', doctor_id: 'MS003', start_time: '2025-04-18T09:00:00', end_time: '2025-04-18T09:40:00', duration: 40, task_status: 'completed', task_statusText: '任务已完成' },
                { record_id: 11, task_id: 'T021', ambulance_id: 'AMB005', equipment_id: 'EQ002', doctor_id: 'MS002', start_time: '2025-04-19T00:45:00', end_time: '2025-04-19T01:15:00', duration: 30, task_status: 'completed', task_statusText: '任务已完成' },
                { record_id: 12, task_id: 'T022', ambulance_id: 'AMB006', equipment_id: 'EQ006', doctor_id: 'MS004', start_time: '2025-04-19T01:00:00', end_time: '2025-04-19T01:40:00', duration: 40, task_status: 'completed', task_statusText: '任务已完成' },
                { record_id: 13, task_id: 'T023', ambulance_id: 'AMB001', equipment_id: 'EQ001', doctor_id: 'MS001', start_time: '2025-04-19T01:30:00', end_time: null, duration: null, task_status: 'ongoing', task_statusText: '任务正在进行中' },
                { record_id: 14, task_id: 'T024', ambulance_id: 'AMB002', equipment_id: 'EQ004', doctor_id: 'MS003', start_time: '2025-04-19T01:45:00', end_time: null, duration: null, task_status: 'pending', task_statusText: '任务待处理' }
            ];

            const tableBody = document.getElementById('taskRecordsTableBody');
            tableBody.innerHTML = '';
            taskRecords.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.record_id}</td>
                    <td>${record.task_id}</td>
                    <td>${record.ambulance_id}</td>
                    <td>${record.equipment_id}</td>
                    <td>${record.doctor_id}</td>
                    <td>${new Date(record.start_time).toLocaleString()}</td>
                    <td>${record.end_time ? new Date(record.end_time).toLocaleString() : '-'}</td>
                    <td>${record.duration || '-'}</td>
                    <td>${record.task_status}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editItem('taskRecords', '${record.record_id}')">
                            <i class="fas fa-edit"></i> 编辑
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteItem('taskRecords', '${record.record_id}')">
                            <i class="fas fa-trash"></i> 删除
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>